# Environment configuration for PacketTracerWeb deployment
# These settings are read during `bash deploy.sh` execution
# 
# HTTPS Configuration:
# ENABLE_HTTPS: set to "true" to enable HTTPS server block and redirect HTTP -> HTTPS
# SSL_CERT_PATH and SSL_KEY_PATH: paths inside the nginx container to the certificate and key
#
# GeoIP Filtering Configuration (automatic setup by deploy.sh):
# NGINX_GEOIP_BLOCK: set to "true" to enable a GeoIP-based blocking rule in nginx (blacklist mode)
# GEOIP_BLOCK_COUNTRIES: comma-separated country codes to block when GEOIP blocking is enabled
# NGINX_GEOIP_ALLOW: set to "true" to enable a GeoIP-based allowlist rule in nginx (whitelist mode)
# GEOIP_ALLOW_COUNTRIES: comma-separated country codes to allow when GEOIP allow is enabled
#   Note: If NGINX_GEOIP_ALLOW is true, only traffic from GEOIP_ALLOW_COUNTRIES is permitted
#   If both GEOIP_BLOCK and GEOIP_ALLOW are true, ALLOW takes precedence
#   The GeoIP database will be automatically downloaded and configured during deploy.sh
#
# GeoIP Database Sources (deploy.sh tries in order):
#   1. DB-IP (free, MMDB format) - Most accurate, modern format
#      https://download.db-ip.com/free/dbip-country-lite-2025-11.mmdb.gz
#   2. MaxMind GeoLite2 (legacy, DAT format) - Fallback option
#      https://geolite.maxmind.com/download/geoip/database/GeoLiteCountry/GeoIP.dat.gz
#
# Rate Limiting Configuration:
# NGINX_RATE_LIMIT_ENABLE: set to "true" to enable per-IP request rate limiting
# NGINX_RATE_LIMIT_RATE: rate limit (e.g. "10r/s" for 10 requests/second, "100r/m" for 100/minute)
# NGINX_RATE_LIMIT_BURST: burst allowance (number of requests that can temporarily exceed the rate)
# NGINX_RATE_LIMIT_ZONE_SIZE: shared memory zone size (e.g. "10m", "20m"). 1MB â‰ˆ 16k client IPs
#   Clients exceeding the rate limit receive HTTP 503 (Service Unavailable)
#   Rate limiting applies per unique client IP and works independently of GeoIP filtering
#
# When enabling HTTPS nginx needs a certificate + key available inside the container.
# These are the default paths the generator will insert into the nginx config. If you
# mount your own certs into the nginx container, adjust these paths accordingly.

ENABLE_HTTPS=true
NGINX_GEOIP_BLOCK=false
GEOIP_BLOCK_COUNTRIES=CN,RU,IR
NGINX_GEOIP_ALLOW=true
GEOIP_ALLOW_COUNTRIES=US,CA,GB,AU,FI

# SSL certificate paths - these are the TARGET paths inside the nginx container
# The deploy.sh script will mount from ./ssl/server.crt (host) to these paths (container)
SSL_CERT_PATH=/etc/ssl/certs/server.crt
SSL_KEY_PATH=/etc/ssl/private/server.key

# Rate Limiting Configuration
NGINX_RATE_LIMIT_ENABLE=true
NGINX_RATE_LIMIT_RATE=10r/s
NGINX_RATE_LIMIT_BURST=20
NGINX_RATE_LIMIT_ZONE_SIZE=10m
