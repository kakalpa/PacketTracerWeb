# Environment configuration for PacketTracerWeb deployment
# These settings are read during `bash deploy.sh` execution
# 
# HTTPS Configuration:
# ENABLE_HTTPS: set to "true" to enable HTTPS server block and redirect HTTP -> HTTPS
# SSL_CERT_PATH and SSL_KEY_PATH: paths inside the nginx container to the certificate and key
#
# GeoIP Filtering Configuration (automatic setup by deploy.sh):
# NGINX_GEOIP_BLOCK: set to "true" to enable a GeoIP-based blocking rule in nginx (blacklist mode)
# GEOIP_BLOCK_COUNTRIES: comma-separated country codes to block when GEOIP blocking is enabled
# NGINX_GEOIP_ALLOW: set to "true" to enable a GeoIP-based allowlist rule in nginx (whitelist mode)
# GEOIP_ALLOW_COUNTRIES: comma-separated country codes to allow when GEOIP allow is enabled
#   Note: If NGINX_GEOIP_ALLOW is true, only traffic from GEOIP_ALLOW_COUNTRIES is permitted
#   If both GEOIP_BLOCK and GEOIP_ALLOW are true, ALLOW takes precedence
#   Trusted IPs always bypass GeoIP filtering
#   The GeoIP database will be automatically downloaded and configured during deploy.sh
#
# Production Mode and Public IP Detection:
# PRODUCTION_MODE: set to "true" when deploying on a public VPS/server
#   When true, deploy.sh will auto-detect the server's public IP and add it to trusted IPs
# PUBLIC_IP: (optional) manually specify the server's public IP address
#   If not provided and PRODUCTION_MODE=true, it will be auto-detected via ifconfig.co
#
# GeoIP Database Sources (deploy.sh tries in order):
#   1. DB-IP (free, MMDB format) - Most accurate, modern format
#      https://download.db-ip.com/free/dbip-country-lite-2025-11.mmdb.gz
#   2. MaxMind GeoLite2 (legacy, DAT format) - Fallback option
#      https://geolite.maxmind.com/download/geoip/database/GeoLiteCountry/GeoIP.dat.gz
#
# When enabling HTTPS nginx needs a certificate + key available inside the container.
# These are the default paths the generator will insert into the nginx config. If you
# mount your own certs into the nginx container, adjust these paths accordingly.

# Production Mode Settings
PRODUCTION_MODE=false
PUBLIC_IP=

ENABLE_HTTPS=true
NGINX_GEOIP_BLOCK=false
GEOIP_BLOCK_COUNTRIES=CN,RU,IR
NGINX_GEOIP_ALLOW=true
GEOIP_ALLOW_COUNTRIES=US,CA,GB,AU,FI

# SSL certificate paths - these are the TARGET paths inside the nginx container
# The deploy.sh script will mount from ./ssl/server.crt (host) to these paths (container)
SSL_CERT_PATH=/etc/ssl/certs/server.crt
SSL_KEY_PATH=/etc/ssl/private/server.key
